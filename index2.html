<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>資產配置計算機</title>
    <style>
        /* [使用與 index.html 相同的樣式，只需添加新的特定樣式] */
        .slider-container {
            margin: 1rem 0;
        }

        .ratio-display {
            display: flex;
            justify-content: space-between;
            margin-top: 0.5rem;
        }

        .adjustment-alert {
            background-color: #e8f5e9;
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
        }
    </style>
</head>
<body>
    <div class="nav-container">
        <nav>
            <ul>
                <li><a href="index.html">投資組合計算機</a></li>
                <li><a href="index2.html" class="active">資產配置計算機</a></li>
            </ul>
        </nav>
    </div>

    <div class="calculator-card">
        <h2>資產配置計算機</h2>
        <div class="input-group">
            <label for="current-stocks">目前股票金額</label>
            <input type="number" id="current-stocks" class="input-field" placeholder="輸入股票現值">
        </div>
        <div class="input-group">
            <label for="current-cash">目前現金金額</label>
            <input type="number" id="current-cash" class="input-field" placeholder="輸入現金金額">
        </div>
        <div class="slider-container">
            <label>目標股票配置比例</label>
            <input type="range" id="stock-ratio" min="0" max="100" value="50" class="input-field">
            <div class="ratio-display">
                <span>股票: <span id="stock-ratio-value">50</span>%</span>
                <span>現金: <span id="cash-ratio-value">50</span>%</span>
            </div>
        </div>
        <button class="calculate-button" onclick="calculateAllocation()">計算配置</button>
        <div id="allocation-results" class="results" style="display: none">
            <!-- 結果將通過 JavaScript 動態填充 -->
        </div>
    </div>

    <script>
        // 添加配置計算功能的 JavaScript
        function calculateAllocation() {
            const currentStocks = Number(document.getElementById('current-stocks').value);
            const currentCash = Number(document.getElementById('current-cash').value);
            const targetRatio = Number(document.getElementById('stock-ratio').value);
            
            const total = currentStocks + currentCash;
            const currentRatio = (currentStocks / total) * 100;
            const targetStocks = total * (targetRatio / 100);
            const adjustment = targetStocks - currentStocks;

            const results = document.getElementById('allocation-results');
            results.style.display = 'block';
            results.innerHTML = `
                <h3>配置分析</h3>
                <div class="results-grid">
                    <div>
                        <p>總資產：${formatNumber(total)} 元</p>
                        <p>目前股票比例：${currentRatio.toFixed(1)}%</p>
                    </div>
                    <div>
                        <p>目標股票金額：${formatNumber(targetStocks)} 元</p>
                        <p>目標現金金額：${formatNumber(total - targetStocks)} 元</p>
                    </div>
                </div>
                ${Math.abs(adjustment) > 1000 ? `
                    <div class="adjustment-alert">
                        <p>建議${adjustment > 0 ? '買入' : '賣出'}股票：${formatNumber(Math.abs(adjustment))} 元</p>
                    </div>
                ` : ''}
            `;
        }

        // 更新比例顯示
        document.getElementById('stock-ratio').oninput = function() {
            const stockRatio = this.value;
            document.getElementById('stock-ratio-value').textContent = stockRatio;
            document.getElementById('cash-ratio-value').textContent = (100 - stockRatio);
        }

        function formatNumber(num) {
            return new Intl.NumberFormat('zh-TW').format(num);
        }
    </script>
</body>
</html>
